/*!2017-11-09 12:57:35 merge: js/recipe/category.js,js/recipe/album/index.js,js/recipe/album/album_slide.js!*/
;(function($){var category_tpl='<li><a class="ht" href="LINK" target="_blank" title="TITLE">TITLE<em class="ico12">&nbsp;</em></a></li>';var category_more='<li><a class="last" href="/recipe/category" target="_blank" title="更多分类标签">更多分类标签</a></li>';var recipe={category_auto:function(){var show=$('#category_nav:visible').size();if(show<=0){recipe.category_one()}else{recipe.category_two()}},category_one:function(){$('#category').hover(function(){$('#category_a').show()},function(){$('#category_a').hide()});var one_flag=true;$('#category').mouseover(function(){if(one_flag==true){one_flag=false;$('#category_nav').html('<li><a class="ht" href="javascript:;">菜谱分类加载中...</li>');$.ajax({url:hd.base.root+'recipe/ajax?do=categorylist',dataType:'json',success:function(json){if(json.status){var data=json.info;var html="",list=data;$.each(list,function(i,n){var k=i+1;var tmp=category_tpl;tmp=tmp.replace(/LINK/g,"/recipe/all?ct="+i);tmp=tmp.replace(/TITLE/g,n);html+=tmp});html+=category_more;$('#category_nav').html(html)}else{one_flag=true}}})}})},category_two:function(){var li_now=$('#category_nav li a').index($('#category_nav li a.sel'));$('#category_nav li:not(#category_nav li:last())').click(function(){var li_temp_now=$(this).index();if($('#category_box_'+li_temp_now).size()>0){$('#category_box_'+li_temp_now).show();$('.classified_box:not(#category_box_'+li_temp_now+')').hide();li_now=li_temp_now;$(this).children('a').addClass('sel');$(this).siblings().children('a').removeClass('sel')}})},favorite:function(){var survery=$('<div class="addfavs" style="display:block;"><a href="javascript://" title="加入到收藏夹"></a></div>');var css={'position':'fixed','top':200,'right':'0px'};if($.browser.version=='6.0'){css.position='absolute';$(window).scroll(function(){survery.css({'top':$(document).scrollTop()+$(window).height()/2})})}survery.css(css);$("body").append(survery);$('.addfavs a').click(function(){var ctrl=(navigator.userAgent.toLowerCase()).indexOf('mac')!=-1?'Command/Cmd':'CTRL';var title=document.title;var url=document.location.href;url=(url.indexOf('?')==-1)?url+"?from=favorite":url+'&from=favorite';try{window.external.addFavorite(url,title)}catch(e){try{window.sidebar.addPanel(title,url,"")}catch(e){hd.dialog.alert('加入到收藏夹失败！您可以尝试通过快捷键'+ctrl+' + D 加入到收藏夹~')}}})},navfixed:function(){$('.status_space').hide();$('.new_status').addClass('lock');var flex="",nav_top=0,nav_class="fixed";var show=$('#category_nav:visible').size();var flex=$('.def_header');if(show==0){nav_top=113}else{nav_top=395}if(flex){$(window).bind('scroll.fixed',function(){if(!flex.data('fixed')&&$(document).scrollTop()>=nav_top){flex.addClass(nav_class).data('fixed',1);if(nav_top==395){recipe.change_cate_down(flex)}}else if($(document).scrollTop()<nav_top){flex.removeClass(nav_class).data('fixed',0);if(nav_top==395){recipe.change_cate_up(flex)}}});$(window).trigger("scroll")}},'change_cate_down':function(flex){flex.find('p.tt,p.xt').html('菜谱分类导航<i class="ico20 iarr">&nbsp;</i>');flex.find('#category_a').hide();flex.find('#category').hover(function(){flex.find('#category_a').show()},function(){flex.find('#category_a').hide()});var t=flex.find('#category_nav li').size();flex.find('#category_nav li').each(function(i,n){var k=parseInt(i+1);if(k<t){$(this).children('a').attr("href","/recipe/all?ct="+k)}})},'change_cate_up':function(flex){flex.find('p.tt,p.xt').html('菜谱分类导航');flex.find('#category_a').show();flex.find('#category').unbind("hover")}};$(function(){if(!hd.base.ie6){recipe.navfixed()}recipe.category_auto();recipe.favorite()})})(jQuery);var Float={float_tpl:$("#showtag").html(),$body:$(document.body),is_ie6:hd.base.ie6,os:$('.imit_table').offset(),mg:10,$win:$(window),init:function(){var $tpl=$(Float.float_tpl).appendTo(Float.$body),left,top;left=Float.os.left-Float.mg-$tpl.width(),top=Float.os.top;$tpl.css({'position':'absolute','left':left,'top':top}).show();Float.$win.on('scroll',function(){Float.scroll($tpl)}).on('resize',function(){Float.resize($tpl)});var hash=window.location.hash;if(hash){var pid=hash.match(/\d/g).join("");Float.gopositon(parseInt(pid))}},scroll:function(tpl){var st=Float.$win.scrollTop(),tt=Float.is_ie6?Float.os.top:Float.os.top-30,cur_top;if(st>=tt){Float.is_ie6||tpl.css('position','fixed');cur_top=Float.is_ie6?st:45}else{Float.is_ie6||tpl.css('position','absolute');cur_top=Float.os.top}tpl.css('top',cur_top)},resize:function(tpl){var tmp_os_left=Float.os.left,tmp_left;tmp_left=tmp_os_left-Float.mg-tpl.width();tpl.css('left',tmp_left)},gopositon:function(id){var mh=Float.is_ie6?0:45;location.hash="#p_"+id;Float.$win.scrollTop($("#p_"+id).offset().top-mh)}};function searchtag(){var searchatgname=$("#searchatgname").val().replace("搜索菜谱专辑",'');if(searchatgname!=''){$("#searchtag").attr("action","/search/collect/"+encodeURIComponent(searchatgname));$("#searchtag").submit()}};function album_keydown(e){e=window.event||e;if(e.keyCode===13){searchtag()}}var slide={id:$(".slideRoll"),pic:$(".slideRoll > .picture_ul"),pot:$(".slideRoll > .point_ul"),tit:$(".slideRoll > .title_ul"),tub:$(".slideRoll > .thumb_ul"),tubli:$(".slideRoll > .thumb_ul > li"),tupot:$(".slideRoll > .point_ul > li"),tutit:$(".slideRoll > .title_ul > li"),dep:0,the:0,len:0,timer:null,flagx:0,construct:function(){slide.len=slide.pic.children("li").length-1;slide.pic.children("li").eq(0).show();slide.tit.children("li").eq(0).show(50);slide.pot.children("li").eq(0).addClass("activ");if(this.id.width()==484&&this.id.height()==331){slide.tubli.children("a").children("i").hide();slide.tubli.eq(0).children("a").children("i").show();slide.tubli.children("a").css({color:'#999'});slide.tubli.eq(0).children("a").css({color:'#666'});this.flagx=1}else{slide.tubli.children("a").children("i").show();slide.tubli.eq(0).children("a").children("i").hide();this.flagx=0}slide.timer=setInterval(slide.at_run,8000)},at_run:function(){if(slide.dep<slide.len){slide.pic.children("li").eq(slide.dep).fadeOut(3500);slide.pic.children("li").eq(slide.dep+1).stop(true,true).fadeIn(3500);slide.pot.children("li").removeClass("activ");slide.pot.children("li").eq(slide.dep+1).addClass("activ");if(slide.flagx==1){slide.tubli.children("a").children("i").hide();slide.tubli.eq(slide.dep+1).children("a").children("i").show();slide.tubli.children("a").css({color:'#999'});slide.tubli.eq(slide.dep+1).children("a").css({color:'#666'})}else{slide.tubli.children("a").children("i").show();slide.tubli.eq(slide.dep+1).children("a").children("i").hide()}slide.tit.children("li").hide();slide.tit.children("li").eq(slide.the+1).show();slide.dep++}else{slide.pic.children("li").eq(slide.dep).fadeOut(3500);slide.pic.children("li").eq(0).stop(true,true).fadeIn(3500);slide.pot.children("li").removeClass("activ");slide.pot.children("li").eq(0).addClass("activ");if(slide.flagx==1){slide.tubli.children("a").children("i").hide();slide.tubli.eq(0).children("a").children("i").show();slide.tubli.children("a").css({color:'#999'});slide.tubli.eq(0).children("a").css({color:'#666'})}else{slide.tubli.children("a").children("i").show();slide.tubli.eq(0).children("a").children("i").hide()}slide.tit.children("li").hide();slide.tit.children("li").eq(0).show();slide.dep=0}},play:function(){slide.timer=setInterval(slide.at_run,8000)},pause:function(x){slide.stop();slide.the=$(x).index();slide.pic.children("li").eq(slide.dep).fadeOut(3500);slide.pic.children("li").eq(slide.the).stop(true,true).fadeIn(3500);slide.pot.children("li").removeClass("activ");slide.pot.children("li").eq(slide.the).addClass("activ");if(slide.flagx==1){slide.tubli.children("a").children("i").hide();slide.tubli.eq(slide.the).children("a").children("i").show();slide.tubli.children("a").css({color:'#999'});slide.tubli.eq(slide.the).children("a").css({color:'#666'})}else{slide.tubli.children("a").children("i").show();slide.tubli.eq(slide.the).children("a").children("i").hide()}slide.tit.children("li").hide();slide.tit.children("li").eq(slide.the).show();slide.dep=slide.the},stop:function(){clearInterval(slide.timer)}};slide.construct();slide.tubli.hover(function(){slide.pause(this)},function(){slide.play()});slide.tupot.add(slide.tutit).hover(function(){slide.pause(this)},function(){slide.play()});